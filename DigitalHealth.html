<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H·ªá th·ªëng Y t·∫ø S·ªë Vi·ªát Nam</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
  <div id="app" class="max-w-7xl mx-auto"></div>

  <script>
    const roles = {
      'y-ta-tyt': {
        name: 'Y t√° Tr·∫°m Y t·∫ø X√£',
        level: 1,
        color: 'bg-green-100 text-green-800 border-green-300',
        permissions: {
          'tam-soat': { read: true, write: true, delete: false },
          'vital-signs': { read: true, write: true, delete: false },
          'telemedicine': { read: true, write: false, delete: false },
          'benh-man-tinh': { read: true, write: true, delete: false },
          'ho-so': { read: true, write: true, delete: false }
        }
      },
      'bac-si-gia-dinh': {
        name: 'B√°c sƒ© Gia ƒë√¨nh',
        level: 2,
        color: 'bg-blue-100 text-blue-800 border-blue-300',
        permissions: {
          'tam-soat': { read: true, write: true, delete: true },
          'vital-signs': { read: true, write: true, delete: true },
          'telemedicine': { read: true, write: true, delete: false },
          'benh-man-tinh': { read: true, write: true, delete: true },
          'ho-so': { read: true, write: true, delete: true },
          'ai-support': { read: true, write: false, delete: false }
        }
      },
      'bac-si-chuyen-khoa': {
        name: 'B√°c sƒ© Chuy√™n khoa',
        level: 3,
        color: 'bg-purple-100 text-purple-800 border-purple-300',
        permissions: {
          'tam-soat': { read: true, write: true, delete: true },
          'vital-signs': { read: true, write: true, delete: true },
          'telemedicine': { read: true, write: true, delete: true },
          'benh-man-tinh': { read: true, write: true, delete: true },
          'ho-so': { read: true, write: true, delete: true },
          'ai-support': { read: true, write: true, delete: false },
          'chan-doan-hinh-anh': { read: true, write: true, delete: false }
        }
      },
      'bac-si-trung-uong': {
        name: 'B√°c sƒ© BV Trung ∆∞∆°ng',
        level: 5,
        color: 'bg-red-100 text-red-800 border-red-300',
        permissions: {
          'tam-soat': { read: true, write: true, delete: true },
          'vital-signs': { read: true, write: true, delete: true },
          'telemedicine': { read: true, write: true, delete: true },
          'benh-man-tinh': { read: true, write: true, delete: true },
          'ho-so': { read: true, write: true, delete: true },
          'ai-support': { read: true, write: true, delete: true },
          'chan-doan-hinh-anh': { read: true, write: true, delete: true },
          'precision-medicine': { read: true, write: true, delete: true },
          'genomics': { read: true, write: true, delete: false }
        }
      }
    };

    const modules = {
      'benh-nhan': {
        name: 'Qu·∫£n l√Ω B·ªánh nh√¢n',
        features: [
          { id: 'ho-so', name: 'H·ªì s∆° b·ªánh √°n', requires: 'ho-so' },
          { id: 'tam-soat', name: 'T·∫ßm so√°t th√¥ng minh', requires: 'tam-soat' },
          { id: 'vital-signs', name: 'Vital Signs', requires: 'vital-signs' },
          { id: 'benh-man-tinh', name: 'B·ªánh m·∫°n t√≠nh', requires: 'benh-man-tinh' }
        ]
      },
      'chan-doan': {
        name: 'Ch·∫©n ƒëo√°n',
        features: [
          { id: 'chan-doan-hinh-anh', name: 'Ch·∫©n ƒëo√°n h√¨nh ·∫£nh', requires: 'chan-doan-hinh-anh' },
          { id: 'ai-support', name: 'AI h·ªó tr·ª£', requires: 'ai-support' }
        ]
      },
      'telemedicine': {
        name: 'Y t·∫ø t·ª´ xa',
        features: [
          { id: 'telemedicine', name: 'T∆∞ v·∫•n video', requires: 'telemedicine' }
        ]
      },
      'chuyen-sau': {
        name: 'Chuy√™n s√¢u',
        features: [
          { id: 'precision-medicine', name: 'Y h·ªçc ch√≠nh x√°c', requires: 'precision-medicine' },
          { id: 'genomics', name: 'Genomics', requires: 'genomics' }
        ]
      }
    };

    let selectedRole = 'bac-si-gia-dinh';
    let expandedSection = null;

    function selectRole(roleKey) {
      selectedRole = roleKey;
      render();
    }

    function toggleSection(sectionKey) {
      expandedSection = expandedSection === sectionKey ? null : sectionKey;
      render();
    }

    function hasPermission(feature, action) {
      const perm = roles[selectedRole].permissions[feature];
      return perm && perm[action];
    }

    function render() {
      const currentRole = roles[selectedRole];
      const html = `
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
          <h1 class="text-3xl font-bold text-gray-800 mb-2">üè• H·ªá th·ªëng Y t·∫ø S·ªë Vi·ªát Nam</h1>
          <p class="text-gray-600">Qu·∫£n l√Ω ph√¢n quy·ªÅn ƒëa tuy·∫øn - L·∫•y ng∆∞·ªùi b·ªánh l√†m trung t√¢m</p>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
          <h2 class="text-xl font-bold mb-4">Ch·ªçn vai tr√≤</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            ${Object.entries(roles).map(([key, role]) => `
              <button
                onclick="selectRole('${key}')"
                class="p-4 rounded-lg border-2 transition-all ${
                  selectedRole === key
                    ? role.color + ' border-current shadow-lg scale-105'
                    : 'bg-white border-gray-200 hover:border-blue-300'
                }"
              >
                <div class="font-semibold text-sm mb-1">${role.name}</div>
                <div class="text-xs opacity-70">Tuy·∫øn ${role.level}</div>
              </button>
            `).join('')}
          </div>
        </div>

        <div class="rounded-lg shadow-lg p-6 mb-6 border-2 ${currentRole.color}">
          <div class="flex justify-between items-center">
            <div>
              <h3 class="text-2xl font-bold">${currentRole.name}</h3>
              <p class="text-sm opacity-80">Tuy·∫øn ${currentRole.level}</p>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold">${Object.keys(currentRole.permissions).length}</div>
              <div class="text-sm opacity-80">Module</div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-bold mb-6">Ma tr·∫≠n ph√¢n quy·ªÅn</h2>
          <div class="space-y-4">
            ${Object.entries(modules).map(([moduleKey, module]) => {
              const hasAnyFeature = module.features.some(f => currentRole.permissions[f.requires]);
              const isExpanded = expandedSection === moduleKey;
              
              return `
                <div class="border rounded-lg overflow-hidden">
                  <button
                    onclick="toggleSection('${moduleKey}')"
                    class="w-full p-4 flex justify-between items-center ${
                      hasAnyFeature ? 'bg-blue-50 hover:bg-blue-100' : 'bg-gray-50'
                    }"
                  >
                    <span class="font-semibold">${module.name}</span>
                    <span>${isExpanded ? '‚ñº' : '‚ñ∂'}</span>
                  </button>

                  ${isExpanded ? `
                    <div class="p-4 bg-gray-50 border-t">
                      ${module.features.map(feature => {
                        const perm = currentRole.permissions[feature.requires];
                        const hasAnyPerm = perm && (perm.read || perm.write || perm.delete);

                        return `
                          <div class="mb-3 p-4 rounded-lg border-2 ${
                            hasAnyPerm ? 'bg-white border-blue-200' : 'bg-gray-100 border-gray-300'
                          }">
                            <div class="font-medium mb-2">${feature.name}</div>
                            <div class="grid grid-cols-3 gap-2">
                              <div class="p-2 rounded text-center ${
                                hasPermission(feature.requires, 'read') ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-400'
                              }">
                                ${hasPermission(feature.requires, 'read') ? '‚úì' : '‚úó'} Xem
                              </div>
                              <div class="p-2 rounded text-center ${
                                hasPermission(feature.requires, 'write') ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-400'
                              }">
                                ${hasPermission(feature.requires, 'write') ? '‚úì' : '‚úó'} S·ª≠a
                              </div>
                              <div class="p-2 rounded text-center ${
                                hasPermission(feature.requires, 'delete') ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-400'
                              }">
                                ${hasPermission(feature.requires, 'delete') ? '‚úì' : '‚úó'} X√≥a
                              </div>
                            </div>
                          </div>
                        `;
                      }).join('')}
                    </div>
                  ` : ''}
                </div>
              `;
            }).join('')}
          </div>
        </div>

        <div class="mt-6 text-center text-sm text-gray-600 bg-white rounded-lg shadow p-4">
          <p>üîí H·ªá th·ªëng tu√¢n th·ªß ISO 27001, ISO 27799, Ngh·ªã ƒë·ªãnh 13/2023</p>
        </div>
      `;

      document.getElementById('app').innerHTML = html;
    }

    // Initial render
    render();
  </script>
</body>
</html>